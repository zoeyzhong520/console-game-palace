{"version":3,"sources":["uni-app:///pages_login/login/login.js"],"names":["userAuth","Bmob","Promise","resolve","reject","uni","showLoading","User","auth","then","res","hideLoading","userInfo","JSON","parse","getStorageSync","query","Query","get","objectId","set","level","signin","save","catch","err","showToast","title","icon","userUpInfo","upInfo","result"],"mappings":"sNAIO,IAAMA,EAAW,SAASC,GAChC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5BC,EAAIC,cACJL,EAAKM,KAAKC,OAAOC,MAAK,SAAAC,GACrBL,EAAIM,cAGJ,IAAMC,EAAWC,KAAKC,MAAMT,EAAIU,eAAe,SAEzCC,EAAQf,EAAKgB,MAAM,SACzBZ,EAAIC,cACJU,EAAME,IAAIN,EAASO,UAAUV,MAAK,SAAAC,GACjCL,EAAIM,cACJD,EAAIU,IAAI,QAASR,EAASS,MAAQT,EAASS,MAAQ,UACnDX,EAAIU,IAAI,SAAUR,EAASU,OAASV,EAASU,OAAS,GACtDZ,EAAIa,OACJpB,EAAQO,MACNc,OAAM,SAAAC,GACRpB,EAAIM,cACJN,EAAIqB,UAAU,CACbC,MAAO,WACPC,KAAM,SAEPxB,EAAOqB,SAEND,OAAM,SAAAC,GACRpB,EAAIM,cACJN,EAAIqB,UAAU,CACbC,MAAO,WACPC,KAAM,SAEPxB,EAAOqB,U,aAUH,IAAMI,EAAa,SAAS5B,EAAMW,GACxC,OAAO,IAAIV,SAAQ,SAACC,EAASC,GAC5BH,EAAKM,KAAKuB,OAAOlB,GAAUH,MAAK,SAAAsB,GAC/B5B,EAAQ4B,MACNP,OAAM,SAAAC,GACRpB,EAAIqB,UAAU,CACbC,MAAO,WACPC,KAAM,SAEPxB,EAAOqB,U","file":"pages_login/common/vendor.js","sourcesContent":["/**\n * @description 小程序一键登录\n * @param {Bmob} Bmob \n */\nexport const userAuth = function(Bmob) {\n\treturn new Promise((resolve, reject) => {\n\t\tuni.showLoading()\n\t\tBmob.User.auth().then(res => {\n\t\t\tuni.hideLoading()\n\t\t\t\n\t\t\t// 获取用户信息\n\t\t\tconst userInfo = JSON.parse(uni.getStorageSync('bmob')) \n\t\t\t// 初始化signin、level\n\t\t\tconst query = Bmob.Query('_User');\n\t\t\tuni.showLoading()\n\t\t\tquery.get(userInfo.objectId).then(res => {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tres.set('level', userInfo.level ? userInfo.level : '斗之气·低阶')\n\t\t\t\tres.set('signin', userInfo.signin ? userInfo.signin : 0)\n\t\t\t\tres.save()\n\t\t\t\tresolve(res)\n\t\t\t}).catch(err => {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录错误，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treject(err)\n\t\t\t})\n\t\t}).catch(err => {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '登录错误，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treject(err)\n\t\t});\n\t})\n}\n\n/**\n * @description 小程序更新用户信息\n * @param {Bmob} Bmob \n * @param {Object} userInfo \n */\nexport const userUpInfo = function(Bmob, userInfo) {\n\treturn new Promise((resolve, reject) => {\n\t\tBmob.User.upInfo(userInfo).then(result => {\n\t\t\tresolve(result)\n\t\t}).catch(err => {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '登录错误，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treject(err)\n\t\t})\n\t})\n}\n"],"sourceRoot":""}